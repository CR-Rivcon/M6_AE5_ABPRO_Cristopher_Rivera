{% extends "eventos/base.html" %}

{% block title %}Eventos{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
	<h1 class="h3 mb-0">Eventos</h1>
	{% if perms.eventos.add_evento %}
		<a href="{% url 'eventos_crear' %}" class="btn btn-primary">Nuevo evento</a>
	{% endif %}
	</div>

<div class="table-responsive">
	<table class="table table-striped align-middle">
		<thead>
		<tr>
			<th>Nombre</th>
			<th>Fecha</th>
			<th>Ubicación</th>
			<th>Privado</th>
			<th></th>
		</tr>
		</thead>
		<tbody>
		{% for e in eventos %}
			<tr>
				<td><a href="{% url 'eventos_detalle' e.pk %}">{{ e.nombre }}</a></td>
				<td>{{ e.fecha }}</td>
				<td>{{ e.ubicacion|default:"-" }}</td>
				<td>{% if e.es_privado %}Sí{% else %}No{% endif %}</td>
				<td class="text-end">
					{% if perms.eventos.change_evento %}
						{% if request.user.is_superuser or e.organizador_id == request.user.id %}
							<a href="{% url 'eventos_editar' e.pk %}" class="btn btn-sm btn-outline-secondary">Editar</a>
						{% endif %}
					{% endif %}
				</td>
			</tr>
		{% empty %}
			<tr><td colspan="5" class="text-center text-muted">No hay eventos disponibles.</td></tr>
		{% endfor %}
		</tbody>
	</table>
</div>
{% endblock %}


